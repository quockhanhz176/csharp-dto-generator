# C# DTO Generator

**C# DTO Generator** # source generator that automatically produces Data Transfer Objects (DTOs) from annotated model classes using compile-time code generation. It leverages Roslynâ€™s incremental generator API to eliminate boilerplate.

---

## Attribute Options

| Property                     | Type        | Default      | Description                                                                                                                        |
| ---------------------------- | ----------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| **`Type`**                   | `Type`      | *(required)* | The source model class to generate the DTO from.                                                                                   |
| **`ClassNamespace`**         | `string?`   | `null`       | Optional namespace for the generated DTO class. Defaults to the annotated classâ€™s namespace.                                       |
| **`ClassName`**              | `string?`   | `null`       | Optional custom name for the generated DTO class. Defaults to the annotated class name.                                            |
| **`IncludeNonPrimitives`**   | `bool`      | `false`      | Whether to include non-primitive (Object) types in the generated DTO. When `false`, only primitive and string types are included. |
| **`ExcludedProperties`**     | `string[]?` | `null`       | Names of properties to exclude from the DTO.                                                                                       |
| **`MakePropertiesOptional`** | `bool`      | `false`      | Makes all properties nullable (`T?`). Useful for PATCH-like DTOs where most fields are optional.                                   |
| **`NonOptionalProperties`**  | `string[]?` | `null`       | Properties that should remain non-nullable, even if `MakePropertiesOptional` is true.                                              |
- Generates DTOs from annotated classes  
- Supports property exclusion via `ExcludedProperties`  
- Allows properties to be optional or required  
- Uses compile-time generation for zero runtime overhead  
- Fully customizable through attributes  

---

## Example Usage

```csharp
using System.ComponentModel.DataAnnotations;
using DtoGenerator.Core;

namespace TestNamespace;

public class Personnel
{
    public uint IdOnDevice { get; set; } = 0;

    public uint Password { get; set; } = uint.MaxValue;

    [MaxLength(100)]
    public string Name { get; set; } = string.Empty;

    public bool IsAdmin { get; set; } = false;
}

[DtoClass(typeof(Personnel), 
    ExcludedProperties = new[] { nameof(Personnel.IsAdmin) })]
public partial class PersonnelDto
{
    public uint Id { get; set; }
}

```

### Generated Code
```csharp
#nullable enable

// <auto-generated/>
namespace TestNamespace;

public partial class PersonnelDto
{
	public uint IdOnDevice { get; set; }

	public uint Password { get; set; }

	[global::System.ComponentModel.DataAnnotations.MaxLengthAttribute(100)]

	public string Name { get; set; }


    public global::TestNamespace.Personnel ToPersonnel()
    {
         var returnValue = new global::TestNamespace.Personnel(){
            IdOnDevice = this.IdOnDevice,
            Password = this.Password,
            Name = this.Name,
        };
        return returnValue;                        
    }

}

public static partial class PersonnelDtoExtensions
{
    public static PersonnelDto ToPersonnelDto(this global::TestNamespace.Personnel source)
    {
         var returnValue = new PersonnelDto(){
            IdOnDevice = source.IdOnDevice,
            Password = source.Password,
            Name = source.Name,
        };
        return returnValue;
    }
}


```

---

## How It Works

1. **Annotate** a partial class with `[DtoObject(...)]`.  
2. **Build** your project â€” the generator runs automatically.  
3. The generated DTO class appears and is available at compile time.

---

## Attribute Options

| Property                     | Type        | Default      | Description                                                                                                                        |
| ---------------------------- | ----------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| **`Type`**                   | `Type`      | *(required)* | The source model class to generate the DTO from.                                                                                   |
| **`ClassNamespace`**         | `string?`   | `null`       | Optional namespace for the generated DTO class. Defaults to the annotated classâ€™s namespace.                                       |
| **`ClassName`**              | `string?`   | `null`       | Optional custom name for the generated DTO class. Defaults to the annotated class name.                                            |
| **`IncludeNonPrimitives`**   | `bool`      | `false`      | Whether to include non-primitive (complex) types in the generated DTO. When `false`, only primitive and string types are included. |
| **`ExcludedProperties`**     | `string[]?` | `null`       | Names of properties to exclude from the DTO.                                                                                       |
| **`MakePropertiesOptional`** | `bool`      | `false`      | Makes all properties nullable (`T?`). Useful for PATCH-like DTOs where most fields are optional.                                   |
| **`NonOptionalProperties`**  | `string[]?` | `null`       | Properties that should remain non-nullable, even if `MakePropertiesOptional` is true.                                              |
| **`CopyAttributes`**         | `bool`      | `true`       | Whether to copy attributes (like `[Required]`, `[MaxLength]`, etc.) from the source model to the generated DTO properties.         |


---

## Installation

Add the NuGet package:

```bash
dotnet add package khanhle.DtoGenerator
```

Or reference the project directly in your `.csproj`:

```xml
  <ItemGroup>
    <ProjectReference
      Include="..\csharp-dto-generator\DtoGenerator.csproj"
      OutputItemType="Analyzer"
      ReferenceOutputAssembly="false"
    />
  </ItemGroup>
```

---

## Requirements

- .NET 6.0+  

---

## ðŸªª License

MIT License Â© 2025  
